<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="701px" preserveAspectRatio="none" style="width:748px;height:701px;background:#FFFFFF;" version="1.1" viewBox="0 0 748 701" width="748px" zoomAndPan="magnify"><defs><filter height="300%" id="f1n1bvwtg8anj6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1n1bvwtg8anj6)" height="316.4609" style="stroke:#000000;stroke-width:2.0;" width="724" x="10" y="295.4922"/><rect fill="#FFFFFF" filter="url(#f1n1bvwtg8anj6)" height="108.5313" style="stroke:#000000;stroke-width:2.0;" width="540" x="20" y="373.8906"/><rect fill="#FFFFFF" filter="url(#f1n1bvwtg8anj6)" height="108.5313" style="stroke:#000000;stroke-width:2.0;" width="595" x="20" y="496.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="77" x2="77" y1="40.2969" y2="658.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="383" x2="383" y1="40.2969" y2="658.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="510" x2="510" y1="40.2969" y2="658.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="571" x2="571" y1="40.2969" y2="658.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="671" x2="671" y1="40.2969" y2="658.0859"/><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="91" x="30" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="37" y="24.9951">User Agent</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="91" x="30" y="657.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="37" y="677.0811">User Agent</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="179" x="292" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="299" y="24.9951">Relying Party A (Primary)</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="179" x="292" y="657.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="299" y="677.0811">Relying Party A (Primary)</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="485" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="492" y="24.9951">RP B</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="485" y="657.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="492" y="677.0811">RP B</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="546" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="553" y="24.9951">RP C</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="546" y="657.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="553" y="677.0811">RP C</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="124" x="607" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="614" y="24.9951">Identity Provider</text><rect fill="#FEFECE" filter="url(#f1n1bvwtg8anj6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="124" x="607" y="657.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="614" y="677.0811">Identity Provider</text><polygon fill="#A80036" points="371.5,67.4297,381.5,71.4297,371.5,75.4297,375.5,71.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="77.5" x2="377.5" y1="71.4297" y2="71.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="84.5" y="66.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="97.5" y="66.3638">GET /app/SignOut</text><line style="stroke:#A80036;stroke-width:1.0;" x1="669" x2="659" y1="100.5625" y2="96.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="669" x2="659" y1="100.5625" y2="104.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="383.5" x2="670" y1="100.5625" y2="100.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="390.5" y="95.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="403.5" y="95.4966">GET /.well-known/openid-configuration</text><line style="stroke:#A80036;stroke-width:1.0;" x1="383.5" x2="393.5" y1="129.6953" y2="125.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="383.5" x2="393.5" y1="129.6953" y2="133.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="383.5" x2="670" y1="129.6953" y2="129.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="400.5" y="124.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="413.5" y="124.6294">[200]  JSON Object</text><polygon fill="#A80036" points="88.5,154.8281,78.5,158.8281,88.5,162.8281,84.5,158.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="82.5" x2="382.5" y1="158.8281" y2="158.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="94.5" y="153.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="107.5" y="153.7622">[200] HTML with JS redirect - reset cookies</text><polygon fill="#A80036" points="659,183.9609,669,187.9609,659,191.9609,663,187.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="77.5" x2="665" y1="187.9609" y2="187.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="84.5" y="182.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="97.5" y="182.895">GET {{end_session_endpoint}}</text><rect fill="#FBFB77" filter="url(#f1n1bvwtg8anj6)" height="53" style="stroke:#A80036;stroke-width:1.0;" width="700" x="24" y="200.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="174.5" y="217.0278">?sid=abc123</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="178.5" y="232.1606">&amp;iss=https://login.idp.example/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="178.5" y="247.2935">&amp;post_logout_redirect_uri=https://myapp.rp-a.example/home</text><polygon fill="#A80036" points="88.5,276.4922,78.5,280.4922,88.5,284.4922,84.5,280.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="82.5" x2="670" y1="280.4922" y2="280.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="94.5" y="275.4263">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="107.5" y="275.4263">HTML with hidden child iframes</text><path d="M10,295.4922 L183,295.4922 L183,302.4922 L173,312.4922 L10,312.4922 L10,295.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="316.4609" style="stroke:#000000;stroke-width:2.0;" width="724" x="10" y="295.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="25" y="308.5591">IDP parent frame</text><path d="M24,317.625 L24,357.625 L724,357.625 L724,327.625 L714,317.625 L24,317.625 " fill="#FFAAAA" filter="url(#f1n1bvwtg8anj6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M714,317.625 L714,327.625 L724,327.625 L714,317.625 " fill="#FFAAAA" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="420" x="157.5" y="334.6919">&lt;iframe src="{{rp-b}}/logout?sid=abc123" style:"display:none"&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="419" x="157.5" y="349.8247">&lt;iframe src="{{rp-c}}/logout?sid=abc123" style:"display:none"&gt;</text><path d="M20,373.8906 L197,373.8906 L197,380.8906 L187,390.8906 L20,390.8906 L20,373.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="108.5313" style="stroke:#000000;stroke-width:2.0;" width="540" x="20" y="373.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132" x="35" y="386.9575">IDP child iframe 1</text><polygon fill="#A80036" points="498.5,408.1563,508.5,412.1563,498.5,416.1563,502.5,412.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="77.5" x2="504.5" y1="412.1563" y2="412.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="84.5" y="407.0903">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="97.5" y="407.0903">IdP child iframe [ GET /logout?sid=abc123 ]</text><polygon fill="#A80036" points="88.5,437.2891,78.5,441.2891,88.5,445.2891,84.5,441.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="82.5" x2="509.5" y1="441.2891" y2="441.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="94.5" y="436.2231">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="107.5" y="436.2231">200, Set-Cookie</text><polygon fill="#FBFB77" filter="url(#f1n1bvwtg8anj6)" points="47,454.2891,540,454.2891,550,465.2891,540,477.2891,47,477.2891,37,465.2891,47,454.2891" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="489" x="49" y="470.356">set-cookie: ActiveSession=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/</text><path d="M20,496.4219 L197,496.4219 L197,503.4219 L187,513.4219 L20,513.4219 L20,496.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="108.5313" style="stroke:#000000;stroke-width:2.0;" width="595" x="20" y="496.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132" x="35" y="509.4888">IDP child iframe 2</text><polygon fill="#A80036" points="559.5,530.6875,569.5,534.6875,559.5,538.6875,563.5,534.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="77.5" x2="565.5" y1="534.6875" y2="534.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="84.5" y="529.6216">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="97.5" y="529.6216">IdP child iframe [ GET /logout?sid=abc123 ]</text><polygon fill="#A80036" points="88.5,559.8203,78.5,563.8203,88.5,567.8203,84.5,563.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="82.5" x2="570.5" y1="563.8203" y2="563.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="94.5" y="558.7544">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="116.5" y="558.7544">200, Set-Cookie</text><polygon fill="#FBFB77" filter="url(#f1n1bvwtg8anj6)" points="53,576.8203,595,576.8203,605,587.8203,595,599.8203,53,599.8203,43,587.8203,53,576.8203" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="489" x="79.5" y="592.8872">set-cookie: ActiveSession=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/</text><polygon fill="#A80036" points="371.5,636.0859,381.5,640.0859,371.5,644.0859,375.5,640.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="77.5" x2="377.5" y1="640.0859" y2="640.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="84.5" y="635.02">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="106.5" y="635.02">GET /home</text><!--MD5=[6184980fafda0d1532955770d990dc86]
@startuml
autonumber

participant "User Agent" as UA
participant "Relying Party A (Primary)" as RPA
participant "RP B" as RPB
participant "RP C" as RPC
participant "Identity Provider" as IDP

UA->RPA: GET /app/SignOut
RPA->>IDP: GET /.well-known/openid-configuration
IDP- ->>RPA: [200]  JSON Object
RPA- ->UA: [200] HTML with JS redirect - reset cookies
UA->IDP: GET {{end_session_endpoint}}
rnote over IDP,UA: ?sid=abc123 \n &iss=https://login.idp.example/ \n &post_logout_redirect_uri=https://myapp.rp-a.example/home
IDP- ->UA: HTML with hidden child iframes
group IDP parent frame

note over IDP, UA #FFAAAA: <iframe src="{{rp-b}}/logout?sid=abc123" style:"display:none">\n<iframe src="{{rp-c}}/logout?sid=abc123" style:"display:none">

group IDP child iframe 1
UA->RPB: IdP child iframe [ GET /logout?sid=abc123 ]
RPB- ->UA: 200, Set-Cookie
hnote over UA,RPB: set-cookie: ActiveSession=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/
end

group IDP child iframe 2
UA->RPC: IdP child iframe [ GET /logout?sid=abc123 ]
RPC- ->UA: 200, Set-Cookie
hnote over UA,RPC: set-cookie: ActiveSession=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/
end

end

UA->RPA: GET /home

@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>